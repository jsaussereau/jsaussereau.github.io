<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Jonathan Saussereau ‚Äì Cours</title><link>https://jsaussereau.github.io/fr/posts/</link><description>Recent content in Cours on Jonathan Saussereau</description><generator>Hugo -- gohugo.io</generator><language>fr</language><lastBuildDate>Wed, 18 Feb 2026 00:00:00 +0000</lastBuildDate><atom:link href="https://jsaussereau.github.io/fr/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>Travaux pratiques d'architecture des processeurs II</title><link>https://jsaussereau.github.io/fr/posts/eel8-numu5/1_intro/</link><pubDate>Wed, 18 Feb 2026 00:00:00 +0000</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel8-numu5/1_intro/</guid><description/></item><item><title>01. Introduction</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/1_intro/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/1_intro/</guid><description>
&lt;p&gt;Ce projet vise √† concevoir un syst√®me embarqu√© bas√© sur un microcontr√¥leur PIC16F877A. L&amp;rsquo;objectif est d&amp;rsquo;impl√©menter horloge une horloge configurable affich√©e sur un afficheur LCD. Le cahier des charges complet se trouve dans la &lt;a href="https://jsaussereau.github.io/fr/posts/eel6-numu2/2_cahier_des_charges/"&gt;section suivante&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Comp√©tences&lt;span class="hx:absolute hx:-mt-20" id="comp√©tences"&gt;&lt;/span&gt;
&lt;a href="#comp%c3%a9tences" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Ce projet a pour objectif de d√©velopper les comp√©tences suivantes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;la programmation par interruptions&lt;/li&gt;
&lt;li&gt;la configuration de p√©riph√©riques&lt;/li&gt;
&lt;li&gt;la structuration d&amp;rsquo;un code&lt;/li&gt;
&lt;li&gt;la mise en place de couches d&amp;rsquo;abstraction&lt;/li&gt;
&lt;li&gt;la mise √† profit d&amp;rsquo;une documentation technique&lt;/li&gt;
&lt;/ul&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition caution"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"&gt;&lt;path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/&gt;&lt;/svg&gt;
&lt;span&gt;Attention&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;L‚Äôutilisation d‚ÄôIA g√©n√©rative &lt;strong&gt;n‚Äôest pas autoris√©e&lt;/strong&gt; pour ce cours. D√©velopper par vous‚Äëm√™me les comp√©tences ci‚Äëdessus est l&amp;rsquo;objectif de ce module. Cela vous permettra d‚Äôutiliser plus tard les outils d‚ÄôIA avec beaucoup plus d‚Äôefficacit√©, de discernement et de recul. M√™me si la tentation est grande, &lt;strong&gt;merci de jouer le jeu&lt;/strong&gt; üôÇ !&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>02. Cahier des charges</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/2_cahier_des_charges/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/2_cahier_des_charges/</guid><description>
&lt;h2&gt;Objectifs principaux&lt;span class="hx:absolute hx:-mt-20" id="objectifs-principaux"&gt;&lt;/span&gt;
&lt;a href="#objectifs-principaux" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Faire clignoter une des LED √† la fr√©quence 0.5 Hz (1 changement d&amp;rsquo;√©tat toutes les secondes) √† partir d&amp;rsquo;&lt;strong&gt;interruptions&lt;/strong&gt; sur le Timer1. Cette fonctionnalit√© doit √™tre maintenue m√™me apr√®s le d√©veloppement des √©tapes suivantes. (&lt;a href="#aide_led"&gt;Aide&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;D√©velopper une biblioth√®que pour l&amp;rsquo;afficheur LCD (&lt;code&gt;lib_LCD.h&lt;/code&gt; et &lt;code&gt;lib_LCD.c&lt;/code&gt;) proposant √† l&amp;rsquo;utilisateur au minimum les fonctionnalit√©s suivantes (&lt;a href="#aide_lib_lcd"&gt;Aide&lt;/a&gt;) :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lcd_init&lt;/code&gt; : Initialisation g√©n√©rale de l&amp;rsquo;afficheur en mode 4 bits&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_putch&lt;/code&gt; : Ecriture d&amp;rsquo;un caract√®re sur l&amp;rsquo;afficheur&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_puts&lt;/code&gt; : Ecriture d&amp;rsquo;une cha√Æne de caract√®res sur l&amp;rsquo;afficheur&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_pos&lt;/code&gt; : Positionnement du curseur en (x,y) - origine en (1,1)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_home&lt;/code&gt; : Cursor home : positionnement du curseur (1,1)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_clear&lt;/code&gt; : Effacement de l&amp;rsquo;√©cran et cursor home&lt;br&gt;
&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Affichage sur l&amp;rsquo;√©cran LCD d&amp;rsquo;une horloge au format &lt;code&gt;HH:MM:SS&lt;/code&gt; qui s&amp;rsquo;incr√©mente √† chaque seconde (via le Timer1). (&lt;a href="#aide_horloge"&gt;Aide&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Pouvoir configurer l&amp;rsquo;horloge √† l&amp;rsquo;aide des boutons poussoir S2 et S3 (&lt;a href="#aide_conf_horloge"&gt;Aide&lt;/a&gt;) :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un appui prolong√© d&amp;rsquo;au moins 2 s sur S2 fera clignoter les heures, celles-ci s&amp;rsquo;incr√©menteront √† chaque appui sur S3, ou automatiquement (f ‚âà 5 Hz) en cas d&amp;rsquo;appui maintenu au-del√† de 2 s.&lt;/li&gt;
&lt;li&gt;Un nouvel appui sur S2 permettra un r√©glage des minutes selon la m√™me proc√©dure.&lt;/li&gt;
&lt;li&gt;√âventuellement, un nouvel appui sur S2 permettra un r√©glage des secondes selon la m√™me proc√©dure.&lt;/li&gt;
&lt;li&gt;Un dernier appui sur S2 fera quitter le mode &amp;ldquo;r√©glage&amp;rdquo;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Objectifs Secondaires&lt;span class="hx:absolute hx:-mt-20" id="objectifs-secondaires"&gt;&lt;/span&gt;
&lt;a href="#objectifs-secondaires" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h4&gt;(Au choix et si le temps le permet)&lt;span class="hx:absolute hx:-mt-20" id="au-choix-et-si-le-temps-le-permet"&gt;&lt;/span&gt;
&lt;a href="#au-choix-et-si-le-temps-le-permet" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Utilisation du potentiom√®tre pour r√©gler les heures/minutes/secondes.&lt;/li&gt;
&lt;li&gt;Ajout de caract√®res personnalis√©s sur l&amp;rsquo;afficheur.&lt;/li&gt;
&lt;li&gt;R√©cup√©ration via le protocole I¬≤C de la temp√©rature du capteur TC74.&lt;/li&gt;
&lt;li&gt;Ajout d&amp;rsquo;une alarme quand l&amp;rsquo;horloge atteint une heure configur√©e, avec une sonnerie ou une m√©lodie sur le buzzer P1.&lt;/li&gt;
&lt;li&gt;Utilisation de l&amp;rsquo;√©cran comme un afficheur √† d√©calage (comme dans les bus/trams).&lt;/li&gt;
&lt;li&gt;Toute autre id√©e que vous aimeriez d√©velopper avec les √©l√©ments √† disposition sur la carte.&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>03. Evaluation</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/3_evaluation/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/3_evaluation/</guid><description>
&lt;h2&gt;Modalit√©s de rendu&lt;span class="hx:absolute hx:-mt-20" id="modalit√©s-de-rendu"&gt;&lt;/span&gt;
&lt;a href="#modalit%c3%a9s-de-rendu" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Le rendu se fait par mail avec comme objet &lt;code&gt;[EN111] NOM1 NOM2&lt;/code&gt;, avant le 25 mai 23:59.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Groupes D et E : &lt;a href="mailto:nader.ajmi@bordeaux-inp.fr?subject=[EN111]%20NOM1%20NOM2"&gt;nader.ajmi@bordeaux-inp.fr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Groupe F : &lt;a href="mailto:Valery.Lebret@enseirb-matmeca.fr?subject=[EN111]%20NOM1%20NOM2"&gt;valery.lebret@enseirb-matmeca.fr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Groupe G : &lt;a href="mailto:jsaussereau@bordeaux-inp.fr?subject=[EN111]%20NOM1%20NOM2"&gt;jsaussereau@bordeaux-inp.fr&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Ressources √† rendre&lt;span class="hx:absolute hx:-mt-20" id="ressources-√†-rendre"&gt;&lt;/span&gt;
&lt;a href="#ressources-%c3%a0-rendre" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Le code source (tous les fichiers &lt;code&gt;.c&lt;/code&gt; et &lt;code&gt;.h&lt;/code&gt; dans le dossier &lt;code&gt;src&lt;/code&gt;) compress√©s dans une archive &lt;code&gt;.zip&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Un rapport par bin√¥me, d&amp;rsquo;environ 10 pages (hors annexe), au format &lt;code&gt;.pdf&lt;/code&gt;, contenant :
&lt;ul&gt;
&lt;li&gt;Une introduction du contexte en r√©sumant le cahier des charges et en pr√©sentant les ressources utiles de la carte.&lt;/li&gt;
&lt;li&gt;Une explication de la conception de chacune des parties du projet :
&lt;ul&gt;
&lt;li&gt;G√©n√©ration de l&amp;rsquo;interruption toutes les secondes
&lt;ul&gt;
&lt;li&gt;Configuration du timer&lt;/li&gt;
&lt;li&gt;Configuration du module CCP&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;D√©veloppement de la biblioth√®que pour l&amp;rsquo;afficheur LCD
&lt;ul&gt;
&lt;li&gt;Simplification des acc√®s&lt;/li&gt;
&lt;li&gt;D√©veloppement d&amp;rsquo;une fonction d&amp;rsquo;envoi de n&amp;rsquo;importe quelle commande&lt;/li&gt;
&lt;li&gt;D√©veloppement des fonctions correspondants aux diff√©rentes commandes&lt;/li&gt;
&lt;li&gt;D√©veloppement de la fonction d&amp;rsquo;initialisation&lt;/li&gt;
&lt;li&gt;D√©veloppement des fonctions utilisateur restantes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Affichage de l&amp;rsquo;horloge sur l&amp;rsquo;√©cran LCD&lt;/li&gt;
&lt;li&gt;D√©veloppement de la fonctionnalit√© de configuration de l&amp;rsquo;horloge&lt;/li&gt;
&lt;li&gt;Eventuelle(s) partie(s) bonus&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Une conclusion sur les enseignements que l&amp;rsquo;on peut tirer de ce projet. Tant d&amp;rsquo;un point de vue technique que m√©thodologique.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Compl√©ments sur le rapport&lt;span class="hx:absolute hx:-mt-20" id="compl√©ments-sur-le-rapport"&gt;&lt;/span&gt;
&lt;a href="#compl%c3%a9ments-sur-le-rapport" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;D√®s que l&amp;rsquo;on utilise &lt;strong&gt;directement&lt;/strong&gt; des registres du microcontr√¥leur, expliquer :
&lt;ul&gt;
&lt;li&gt;Quels sont les registres utilis√©s ?&lt;/li&gt;
&lt;li&gt;Quelles sont les valeurs qui ont √©t√© mises dans ces registres ?&lt;/li&gt;
&lt;li&gt;Quelles actions ont ces valeurs techniquement ?&lt;/li&gt;
&lt;li&gt;Quelles sont les fonctionnalit√©s recherch√©es qui justifient ces valeurs ?&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Pour l&amp;rsquo;explication des fonctions, il ne s&amp;rsquo;agit pas de juste expliquer ce qu&amp;rsquo;elles font fonctionnellement (√ßa c&amp;rsquo;est le cahier des charges, que l&amp;rsquo;on a d√©j√†). Il s&amp;rsquo;agit d&amp;rsquo;expliquer &lt;strong&gt;comment elles ont √©t√© impl√©ment√©es&lt;/strong&gt; (op√©rations utilis√©es, logique, optimisations, &amp;hellip;) et pourquoi elles sont impl√©ment√©es comme √ßa et pas autrement.&lt;/li&gt;
&lt;li&gt;De mani√®re g√©n√©rale, d√®s que des choix on √©t√© fait, comme des choix de configuration de module, ou des choix d&amp;rsquo;impl√©mentation, expliquer ces choix, &lt;strong&gt;m√™me quand plusieurs configurations correspondaient aux exigences&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;La description de &lt;code&gt;lcd_write_instr_4bits&lt;/code&gt;, &lt;code&gt;lcd_write_instr_8bits&lt;/code&gt; et &lt;code&gt;lcd_init&lt;/code&gt; pourra √™tre accompagn√©e d&amp;rsquo;organigrammes expliquant le d√©roulement de ces fonctions.&lt;/li&gt;
&lt;li&gt;La description de la partie de configuration de l&amp;rsquo;horloge pourra √™tre accompagn√©e d&amp;rsquo;un diagramme de la machine d&amp;rsquo;√©tat.&lt;/li&gt;
&lt;li&gt;Bien faire appara√Ætre, et justifier, ce qui est effectu√© par interruption et ce qui ne l&amp;rsquo;est pas.&lt;/li&gt;
&lt;li&gt;M√™me si vous n&amp;rsquo;avez pas r√©alis√© une partie, vous pouvez l&amp;rsquo;indiquer et expliquer comment vous auriez fait.&lt;/li&gt;
&lt;li&gt;Bon courage ;)&lt;/li&gt;
&lt;/ul&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition caution"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"&gt;&lt;path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/&gt;&lt;/svg&gt;
&lt;span&gt;Attention&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;ol&gt;
&lt;li&gt;Le code source doit compiler !&lt;/li&gt;
&lt;li&gt;La note qui vous sera attribu√©e sur ce module tient √©galement compte du travail observ√© durant les s√©ances de TP + projet et des √©ventuelles absences non justifi√©es.&lt;/li&gt;
&lt;li&gt;Le &lt;a href="https://nuxeo.ipb.fr/nuxeo/nxfile/default/fa82b9dd-f22c-4d41-8ace-5a5e7fa7e60d/blobholder:0/Charte-anti-plagiat.pdf" target="_blank" rel="noopener"&gt;plagiat&lt;/a&gt; constitue une fraude dont les cons√©quences peuvent √™tre graves :
attribution d‚Äôune note de z√©ro au travail incrimin√©, exclusion de l‚Äô√©tablissement, exclusion d√©finitive de tout √©tablissement d‚Äôenseignement sup√©rieur fran√ßais.&lt;br&gt;
En mati√®re de propri√©t√© intellectuelle, le plagiat constitue un d√©lit.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>04. Get started</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/4_get_started/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/4_get_started/</guid><description>
&lt;!-- &lt;h2 id="aide_get_started"&gt; 1. Get started üèÅ&lt;/h2&gt; --&gt;
&lt;h2&gt;T√©l√©chargemment du r√©pertoire&lt;span class="hx:absolute hx:-mt-20" id="t√©l√©chargemment-du-r√©pertoire"&gt;&lt;/span&gt;
&lt;a href="#t%c3%a9l%c3%a9chargemment-du-r%c3%a9pertoire" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Ex√©cuter dans un terminal :&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd ~/Documents/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/jsaussereau/EN111PR.git&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Le dossier &lt;code&gt;EN111PR&lt;/code&gt; devrait √™tre apparu sur votre session dans le dossier &lt;code&gt;Documents&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;details&gt;
&lt;summary&gt;Solution alternative&lt;/summary&gt;
&lt;ul&gt;
&lt;li&gt;Cliquer &lt;a href="https://github.com/jsaussereau/EN111PR/archive/refs/heads/main.zip" target="_blank" rel="noopener"&gt;ici&lt;/a&gt; pour t√©l√©charger l&amp;rsquo;archive.&lt;/li&gt;
&lt;li&gt;Extraire l&amp;rsquo;archive sur la session dans &lt;strong&gt;Documents&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;h2&gt;Organisation du r√©pertoire&lt;span class="hx:absolute hx:-mt-20" id="organisation-du-r√©pertoire"&gt;&lt;/span&gt;
&lt;a href="#organisation-du-r%c3%a9pertoire" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Il y a 3 dossiers principaux :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;doc&lt;/strong&gt; : Contient les documents n√©cessaires pour le projet : sujet, datasheet du PIC16F877A, datasheets de la carte et de l&amp;rsquo;afficheur.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;src&lt;/strong&gt; : Contient les fichiers sources √† utiliser (d√©j√† import√©s dans le projet).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;work&lt;/strong&gt; : Le dossier dans lequel se situe le projet MPLABX, d√©j√† configur√©.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;D√©marrage du projet&lt;span class="hx:absolute hx:-mt-20" id="d√©marrage-du-projet"&gt;&lt;/span&gt;
&lt;a href="#d%c3%a9marrage-du-projet" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Un projet d√©j√† configur√© est disponible dans &lt;code&gt;work&lt;/code&gt;. Pour l&amp;rsquo;ouvrir :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Dans MPLABX, aller dans &lt;strong&gt;File &amp;gt; Open Project&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;S√©lectionner le projet &lt;strong&gt;PROJET.X&lt;/strong&gt; pr√©sent dans le dossier &lt;code&gt;~/Documents/EN111PR/work&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Plusieurs fichiers sont d√©j√† cr√©√©s dans le dossier &lt;code&gt;src&lt;/code&gt; (voir &amp;ldquo;Header Files&amp;rdquo; et &amp;ldquo;Source Files&amp;rdquo; dans MPLABX) :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;main.c&lt;/code&gt; : Fichier principal. C&amp;rsquo;est ici que se trouve la fonction main et la fonction d&amp;rsquo;interruption.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;timer.c&lt;/code&gt; et &lt;code&gt;timer.h&lt;/code&gt; : Fichiers o√π d√©velopper &lt;a href="#aide_led"&gt;la configuration du timer&lt;/a&gt;, &lt;a href="#aide_horloge"&gt;la mise en forme&lt;/a&gt; et &lt;a href="#aide_conf_horloge"&gt;la configuration&lt;/a&gt; de l&amp;rsquo;horloge.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lib_LCD.c&lt;/code&gt; et &lt;code&gt;lib_LCD.h&lt;/code&gt; : Fichiers o√π d√©velopper &lt;a href="#aide_lib_lcd"&gt;la biblioth√®que LCD&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition warning"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"&gt;&lt;path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/&gt;&lt;/svg&gt;
&lt;span&gt;Avertissement&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Pensez √† &lt;strong&gt;faire valider votre travail √† chaque partie&lt;/strong&gt;, avant de passer aux √©tapes suivantes.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>05. Clignotement de la LED</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/5_led/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/5_led/</guid><description>
&lt;!-- &lt;h2 id="aide_led"&gt; 2. Clignotement de la LED √† la fr√©quence 0.5 Hz &lt;/h2&gt; --&gt;
&lt;p&gt;Le tout premier objectif est de faire clignoter une des LED √† la fr√©quence 0.5 Hz (1 changement d‚Äô√©tat toutes les secondes) √† partir d‚Äôinterruptions sur le Timer1.&lt;/p&gt;
&lt;h3&gt;Choix de la strat√©gie&lt;span class="hx:absolute hx:-mt-20" id="choix-de-la-strat√©gie"&gt;&lt;/span&gt;
&lt;a href="#choix-de-la-strat%c3%a9gie" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Nous avons ici une exigence de pr√©cision, alors comme en TP, c&amp;rsquo;est la strat√©gie par interruption qui s&amp;rsquo;impose face √† l&amp;rsquo;attente active.&lt;/p&gt;
&lt;p&gt;Pour g√©n√©rer les interruptions qui ferront clignoter la LED, nous avons le choix entre les 3 timers du microcontr√¥leur.&lt;/p&gt;
&lt;p&gt;La datasheet &lt;em&gt;DS_PIC16F877A&lt;/em&gt; nous apprend qu&amp;rsquo;il est possible de configurer le Timer 1 sur une horloge externe.
Le sch√©ma √† la page 19 de la datasheet de la carte PICDEM2+ &lt;em&gt;DS_PICDEM_2_Plus_Users_Guide&lt;/em&gt; montre qu&amp;rsquo;il y a un quartz (Y3) de 32.768 kHz ($2^{15}$ Hz) reli√© aux broches OSO (RC0) et OSI (RC1) du PIC.&lt;/p&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;L&amp;rsquo;incr√©mentation d&amp;rsquo;un compteur 16 bits comme le Timer 1 √† une fr√©quence de $2^{15}$ Hz permettrait un d√©bordement de celui-ci toutes les 2 secondes ($2^{16} / 2^{15}$) tr√®s pr√©cis√©ment.
Le Timer 1 est donc un bon candidat pour cette application.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3&gt;D√©veloppement d&amp;rsquo;une biblioth√®que pour le Timer 1&lt;span class="hx:absolute hx:-mt-20" id="d√©veloppement-dune-biblioth√®que-pour-le-timer-1"&gt;&lt;/span&gt;
&lt;a href="#d%c3%a9veloppement-dune-biblioth%c3%a8que-pour-le-timer-1" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;La section &amp;ldquo;Timer1&amp;rdquo; de la datasheet du microcontr√¥leur &lt;em&gt;DS_PIC16F877A&lt;/em&gt; d√©taille le fonctionnement de ce timer, avec notamment un sch√©ma de son fonctionnement et un tableau regroupant les registres √† utiliser pour le configurer.&lt;/p&gt;
&lt;p&gt;On cherche tout d&amp;rsquo;abord √† d√©finir √† l&amp;rsquo;aide de &lt;code&gt;#define&lt;/code&gt; dans &lt;code&gt;timer.h&lt;/code&gt; (Header Files) les diff√©rentes valeurs des champs associ√©s au Timer 1. Cela permettra d&amp;rsquo;avoir juste √† choisir la bonne constante lors de la configuration du timer.&lt;/p&gt;
&lt;p&gt;En plus de faciliter l&amp;rsquo;√©tape de configuration, l&amp;rsquo;objectif est que par la suite chaque ligne de code soit compr√©hensible sans avoir √† regarder la datasheet.&lt;/p&gt;
&lt;h4&gt;Exemple de ce qu&amp;rsquo;il &lt;strong&gt;ne faut PAS&lt;/strong&gt; faire :&lt;span class="hx:absolute hx:-mt-20" id="exemple-de-ce-quil-ne-faut-pas-faire-"&gt;&lt;/span&gt;
&lt;a href="#exemple-de-ce-quil-ne-faut-pas-faire-" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;code&gt;timer.c&lt;/code&gt;&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;timer_init&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; T1CON &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0x4c&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La notation est compacte mais on ne comprend rien √† ce qu&amp;rsquo;il se passe&amp;hellip;
Sans la datasheet sous les yeux et un effort de compr√©hension (avec risque d&amp;rsquo;erreur), impossible de savoir √† quelle configuration correspond cette valeur.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"&gt;&lt;path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/&gt;&lt;/svg&gt;
&lt;span&gt;Note&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Dans le milieu professionnel, les codes sont √©crits par plusieurs personnes et doivent pouvoir √™tre repris par n&amp;rsquo;importe qui dans le futur. Il donc est impensable de proposer un tel code en entreprise.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4&gt;Exemple de notation bien plus lisible :&lt;span class="hx:absolute hx:-mt-20" id="exemple-de-notation-bien-plus-lisible-"&gt;&lt;/span&gt;
&lt;a href="#exemple-de-notation-bien-plus-lisible-" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;code&gt;timer.h&lt;/code&gt;&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;//T1CONbits.T1CKPS :
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define T1_PRESCALER_DIV8 0b11
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define T1_PRESCALER_DIV4 0b10
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define T1_PRESCALER_DIV2 0b01
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define T1_PRESCALER_DIV1 0b00
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;//...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;timer.c&lt;/code&gt;&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;timer_init&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; T1CONbits.T1CKPS &lt;span style="color:#f92672"&gt;=&lt;/span&gt; T1_PRESCALER_DIV8; &lt;span style="color:#75715e"&gt;// Division par 8 car ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; T1CONbits.T1OSCEN &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ...;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;L&amp;rsquo;exemple ci dessus met en oeuvre plusieurs bonnes pratiques :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;L&amp;rsquo;initialisation des champs ind√©pendaments les uns des autres plut√¥t que d&amp;rsquo;√©crire sur tout le registre : le code est plus simple √† comprendre et √† modifier.&lt;/li&gt;
&lt;li&gt;L&amp;rsquo;utilisation de constantes avec des noms signifiants : permet de comprendre facilement quel est le r√¥le de la valeur qui a √©t√© mise dans le champs.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="admonition note"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"&gt;&lt;path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/&gt;&lt;/svg&gt;
&lt;span&gt;Note&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Cette notation demande un effort suppl√©mentaire lors de l&amp;rsquo;√©criture du programme mais rendra le d√©buggage et la modification tellement plus facile. Ici, m√™me sans la datasheet, on comprend ce qu&amp;rsquo;il se passe.
De plus, les commentaires sont un bon moyen de se rappeler pourquoi on a fait tel ou tel choix.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3&gt;Configuration du timer&lt;span class="hx:absolute hx:-mt-20" id="configuration-du-timer"&gt;&lt;/span&gt;
&lt;a href="#configuration-du-timer" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Il ne reste plus qu&amp;rsquo;√† utiliser ces d√©finitions pour l&amp;rsquo;initialisation du timer dans la fonction &lt;code&gt;timer_init&lt;/code&gt; (&lt;code&gt;timer.c&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;L&amp;rsquo;objectif √©tant dans un premier temps de le configurer pour qu&amp;rsquo;il d√©clenche une interruption toutes les deux secondes.&lt;/p&gt;
&lt;p&gt;La section &lt;code&gt;TIMER1 MODULE&lt;/code&gt; de la datasheet &lt;em&gt;DS_PIC16F877A&lt;/em&gt; d√©crit le fonctionnement du Timer1. Le sch√©ma page 58 aide √† comprendre son fonctionnement et le r√¥le de chaque champ de configuration.&lt;/p&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Le tableau √† la page 60 de la datasheet &lt;em&gt;DS_PIC16F877A&lt;/em&gt; met en √©vidence tous les champs li√©s au Timer1. Pour √™tre s√ªr de l&amp;rsquo;avoir bien configur√©, il faut √™tre s√ªr de comprendre quel est le r√¥le de chacun de ces champs et √™tre s√ªr d&amp;rsquo;avoir assign√© la bonne valeur aux champs qui en ont besoin.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Une fois le timer configur√©, on veut d√©clencher une interruption √† chaque d√©bordement. Il faut aussi configurer notre fonction d&amp;rsquo;interruption pour faire changer d&amp;rsquo;√©tat la LED √† chaque interruption.&lt;/p&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Le sch√©ma page 153 permet de visualiser les conditions √† remplir pour qu&amp;rsquo;une interruption se d√©clenche.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"&gt;&lt;path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/&gt;&lt;/svg&gt;
&lt;span&gt;Note&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Une fois les interruptions configur√©es, on peut d√©j√† essayer sur la carte pour voir si on a bien la LED qui change d&amp;rsquo;√©tat toutes les 2 secondes.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3&gt;Configuration du module CCP&lt;span class="hx:absolute hx:-mt-20" id="configuration-du-module-ccp"&gt;&lt;/span&gt;
&lt;a href="#configuration-du-module-ccp" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Pour avoir un d√©bordement toutes les secondes (et plus toutes les 2 secondes), on peut utiliser un module de comparaison CCP.&lt;br&gt;
Le but est ici d&amp;rsquo;utiliser ce module pour g√©n√©rer une interruption √† chaque fois que la valeur du compteur du Timer1 est √† mi-parcours (entre deux interruptions de d√©bordement). Il faut donc √©galement activer les interruptions sur le module CCP.&lt;/p&gt;
&lt;p&gt;Les modules CCP peuvent √™tre utilis√©s dans diff√©rentes configurations, il faut choisir la plus adapt√©e au besoin.&lt;br&gt;
Il faut aussi penser √† bien mettre une valeur √† comparer.&lt;/p&gt;
&lt;p&gt;Comme pour la configuration du timer, la configuration du module CCP se fera a l&amp;rsquo;aide de constantes d√©finies au pr√©alable.&lt;/p&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Le tableau √† la page 68 de la datasheet &lt;em&gt;DS_PIC16F877A&lt;/em&gt; met en √©vidence tous les champs li√©s au module CCP. Pour √™tre s√ªr de l&amp;rsquo;avoir bien configur√©, il faut √™tre s√ªr de comprendre quel est le r√¥le de chacun de ces champs et √™tre s√ªr d&amp;rsquo;avoir assign√© la bonne valeur aux champs qui en ont besoin.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>06. LCD Etape #1</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/6_lcd_1/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/6_lcd_1/</guid><description>
&lt;p&gt;L&amp;rsquo;objectif est d√©sormais de d√©velopper une biblioth√®que pour l&amp;rsquo;afficheur LCD. Pour cela nous allons proc√©der par √©tape, en ajoutant des niveaux d&amp;rsquo;abstraction au fur et √† mesure.&lt;/p&gt;
&lt;!-- &lt;h2 id="aide_lib_lcd"&gt; 3. D√©veloppement de la biblioth√®que pour l'afficheur LCD &lt;/h2&gt; --&gt;
&lt;h3&gt;Documentation&lt;span class="hx:absolute hx:-mt-20" id="documentation"&gt;&lt;/span&gt;
&lt;a href="#documentation" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Pour d√©velopper la biblioth√®que LCD, 2 documents seront utiles :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;DS_PICDEM_2_Plus_Users_Guide&lt;/em&gt; : Datasheet de la carte de d√©veloppement. Le sch√©ma √©lectrique page 19 permet de comprendre les interconnexions entre le microcontr√¥leur et le module LCD.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt; : Datasheet du module LCD. On y trouve la description des entr√©es/sorties du module (page 4), ansi que les chronogrammes √† respecter pour ces signaux (pages 23-24). Toutes les commandes propos√©es par le module y sont d√©taill√©es (pages 5-7). Enfin, la datasheet explicite la proc√©dure d&amp;rsquo;initialisation du module (pages 10-11).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;ins&gt;√âtape 1&lt;/ins&gt; : Simplification des acc√®s&lt;span class="hx:absolute hx:-mt-20" id="√©tape-1--simplification-des-acc√®s"&gt;&lt;/span&gt;
&lt;a href="#%c3%a9tape-1--simplification-des-acc%c3%a8s" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Pour envoyer des instructions, il faut √™tre capable d&amp;rsquo;acc√©der individuellement aux diff√©rents champs du port D qui contr√¥lent l&amp;rsquo;√©cran LCD. Il est notamment n√©cessaire d&amp;rsquo;√©crire sur les 4 bits de donn√©es sans modifier les autres bits du port.&lt;/p&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Avant toute chose, il est donc vivement recommand√© de simplifier les lectures/√©critures sur les diff√©rents champs du module LCD.&lt;br&gt;
Deux approches sont pr√©sent√©es ici.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4&gt;M√©thode 1 : Masquage&lt;span class="hx:absolute hx:-mt-20" id="m√©thode-1--masquage"&gt;&lt;/span&gt;
&lt;a href="#m%c3%a9thode-1--masquage" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;details&gt;
&lt;summary&gt;Cliquer ici pour √©tendre&lt;/summary&gt;
&lt;p&gt;Le plus simple est de d√©finir √† l&amp;rsquo;aide de &lt;code&gt;#define&lt;/code&gt; les alias des diff√©rents bits, pour un acc√®s plus clair.&lt;br&gt;
Les acc√®s au bits se font ainsi simplement par leurs noms. Pour √©crire sur plusieurs bits, il faut effectuer un &lt;a href="https://dept-info.labri.fr/ENSEIGNEMENT/programmation1/cours/CM_9___Manipulation_binaire.pdf" target="_blank" rel="noopener"&gt;masquage&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note&lt;/strong&gt;&lt;/em&gt; : On a ici la chance de pouvoir acc√©der aux bits individuellement de base. Sinon, il aurait fallu utiliser le masquage dans tous les cas.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Exemple&lt;/strong&gt;&lt;/em&gt; :&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lib_LCD.h&lt;/code&gt;&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define LCD PORTD
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define E RD6
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define E_ENABLED 0b1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define E_DISABLED 0b0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;lib_LCD.c&lt;/code&gt;&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;lcd_write_instr_8bits&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rs, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rw, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; data) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// [...]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; RS &lt;span style="color:#f92672"&gt;=&lt;/span&gt; rs;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; RW &lt;span style="color:#f92672"&gt;=&lt;/span&gt; rw;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LCD &lt;span style="color:#f92672"&gt;&amp;amp;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0xf0&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// mise √† 0 des 4 bits de poids faible
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LCD &lt;span style="color:#f92672"&gt;|=&lt;/span&gt; (data_MSB &lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0x0f&lt;/span&gt;); &lt;span style="color:#75715e"&gt;// application des 4 MSB de la donn√©e sur les 4 LSB de LCD
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; E &lt;span style="color:#f92672"&gt;=&lt;/span&gt; E_ENABLED;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// [...]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h4&gt;M√©thode 2 : Champs de bits (bitfields)&lt;span class="hx:absolute hx:-mt-20" id="m√©thode-2--champs-de-bits-bitfields"&gt;&lt;/span&gt;
&lt;a href="#m%c3%a9thode-2--champs-de-bits-bitfields" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Une autre m√©thode, plus pratique √† utiliser, se base sur le m√™me principe d&amp;rsquo;&lt;a href="https://www.tutorialspoint.com/cprogramming/c_unions.htm" target="_blank" rel="noopener"&gt;union&lt;/a&gt; de &lt;a href="https://www.tutorialspoint.com/cprogramming/c_bit_fields.htm" target="_blank" rel="noopener"&gt;bitfields&lt;/a&gt; que dans le fichier d&amp;rsquo;include &lt;code&gt;pic16f877a.h&lt;/code&gt;. Il suffit de cr√©er un nouveau type sur le mod√®le de celui associ√© au PORTD.&lt;/p&gt;
&lt;p&gt;Comme dans le fichier d&amp;rsquo;include, on peut donner plusieurs d√©finitions aux &lt;a href="https://www.tutorialspoint.com/cprogramming/c_bit_fields.htm" target="_blank" rel="noopener"&gt;bitfields&lt;/a&gt; gr√¢ce aux &lt;a href="https://www.tutorialspoint.com/cprogramming/c_unions.htm" target="_blank" rel="noopener"&gt;unions&lt;/a&gt;. On peut par exemple nommer les bits un √† un, et, plus int√©ressant, d√©finir des champs. Cela rend les lectures/√©critures tr√®s simples.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"&gt;&lt;path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/&gt;&lt;/svg&gt;
&lt;span&gt;Note&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;L&amp;rsquo;ordre des bits dans les champs de bits n&amp;rsquo;est h√©las pas norm√©, il d√©pend du compilateur et de l&amp;rsquo;architecture. Sur PIC, avec le compilateur XC8, le bit de poids faible (LSB) est en premier et le bit de poids fort (MSB) est en dernier.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;Exemple&lt;/strong&gt;&lt;/em&gt; :&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lib_LCD.h&lt;/code&gt;&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;typedef&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;union&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// d√©finitions des bits individuellement :
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; DB4 :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; DB5 :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; DB6 :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; DB7 :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; RS :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; RW :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 5
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; E :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 6
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; POWER :&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bit 7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// d√©finition des champs :
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; DB :&lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bits 0 √† 3 : donn√©es
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; OPERATION :&lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// bits 4 et 5 : RS et RW : d√©finissent le type d&amp;#39;op√©ration
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;unsigned&lt;/span&gt; &lt;span style="color:#f92672"&gt;:&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// E et POWER d√©j√† d√©finis, facultatif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;} LCDbits_t;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;extern&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;volatile&lt;/span&gt; LCDbits_t LCDbits &lt;span style="color:#960050;background-color:#1e0010"&gt;@&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0x008&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// D√©finition de &amp;#34;LCDbits&amp;#34; de type LCDbits_t, avec l&amp;#39;adresse du PORTD
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Gr√¢ce au mot-cl√© &lt;a href="https://www.tutorialspoint.com/cprogramming/c_typedef.htm" target="_blank" rel="noopener"&gt;typedef&lt;/a&gt;, on a ici d√©fini notre propre type &lt;code&gt;LCDbits_t&lt;/code&gt;, qui est une &lt;a href="https://www.tutorialspoint.com/cprogramming/c_unions.htm" target="_blank" rel="noopener"&gt;union&lt;/a&gt; de &lt;a href="https://www.tutorialspoint.com/cprogramming/c_bit_fields.htm" target="_blank" rel="noopener"&gt;bitfields&lt;/a&gt;, repr√©sentant les champs de l&amp;rsquo;√©cran LCD, connect√©s au port D.&lt;/p&gt;
&lt;p&gt;Pour utiliser ce type sur le port D, on d√©clare donc une variable &lt;code&gt;LCDbits&lt;/code&gt; de type &lt;code&gt;LCDbits_t&lt;/code&gt; √† l&amp;rsquo;adresse &lt;code&gt;0x008&lt;/code&gt; qui est l&amp;rsquo;adresse du port D. C&amp;rsquo;est tr√®s exactement de la m√™me mani√®re que &lt;code&gt;PORTDbits&lt;/code&gt; est d√©fini dans &lt;code&gt;pic16f877a.h&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Gr√¢ce aux deux d√©finitions sp√©cifi√©es du port, on a alors plusieurs fa√ßons d&amp;rsquo;acc√©der √† nos signaux :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;On peut acc√©der au bits individuellement, comme DB5, RS, RW pu E par exemple.&lt;/li&gt;
&lt;li&gt;On peut acc√©der √† des champs entiers comme DB (DB7-DB4) ou OPERATION (RS,RW)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Exemple d&amp;rsquo;utilisation :
&lt;code&gt;lib_LCD.c&lt;/code&gt;&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;lcd_write_instr_8bits&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rs, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rw, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; data_8bits) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// [...]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LCDbits.RS &lt;span style="color:#f92672"&gt;=&lt;/span&gt; rs;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// [...]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LCDbits.DB &lt;span style="color:#f92672"&gt;=&lt;/span&gt; data_MSB;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LCDbits.E &lt;span style="color:#f92672"&gt;=&lt;/span&gt; E_ENABLED;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// [...]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>07. LCD Etape #2</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/7_lcd_2/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/7_lcd_2/</guid><description>
&lt;h3&gt;&lt;ins&gt;√âtape 2&lt;/ins&gt; : D√©veloppement d&amp;rsquo;une fonction d&amp;rsquo;envoi de n&amp;rsquo;importe quelle commande&lt;span class="hx:absolute hx:-mt-20" id="√©tape-2--d√©veloppement-dune-fonction-denvoi-de-nimporte-quelle-commande"&gt;&lt;/span&gt;
&lt;a href="#%c3%a9tape-2--d%c3%a9veloppement-dune-fonction-denvoi-de-nimporte-quelle-commande" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Maintenant que les acc√®s aux diff√©rents champs associ√©s au module LCD sont plus simples √† utiliser, la prochaine √©tape est de d√©velopper des fonctions qui pourront √™tre utilis√©es par toutes les fonctions qui ont besoin d&amp;rsquo;envoyer une commande au module.&lt;/p&gt;
&lt;p&gt;La datasheet du module LCD &lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt; nous apprend que l&amp;rsquo;on peut c√¢bler ce module LCD √† un microcontr√¥leur sur 8 bits (DB7-DB0) ou 4 bits (DB7-DB4)&lt;/p&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Le sch√©ma √† la page 19 de la datasheet de la carte PICDEM2+ &lt;em&gt;DS_PICDEM_2_Plus_Users_Guide&lt;/em&gt; montre comment le module LCD est reli√© au microcontr√¥leur. On voit que le bus de donn√©es est ici utilis√© sur 4 bits.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"&gt;&lt;path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/&gt;&lt;/svg&gt;
&lt;span&gt;Note&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Cela n&amp;rsquo;a pas d&amp;rsquo;impact sur la taille des commandes que l&amp;rsquo;on peut envoyer. En effet, m√™me lorsqu&amp;rsquo;il est cabl√© sur 4 bits, l&amp;rsquo;afficheur LCD peut recevoir des commandes avec des donn√©es de 4 bits ou bien 8 bits. C&amp;rsquo;est le protocole de communication qui change.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;On va donc d√©velopper des fonctions pour ces deux cas :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lcd_write_instr_4bits&lt;/code&gt; : envoi d&amp;rsquo;une commande avec 4 bits de donn√©es (pour les premi√®res commandes de l&amp;rsquo;initialisation)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_write_instr_8bits&lt;/code&gt; : envoi d&amp;rsquo;une commande avec 8 bits de donn√©es (pour toutes les commandes classiques)&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="admonition important"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"&gt;&lt;path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/&gt;&lt;/svg&gt;
&lt;span&gt;Important&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Dans les deux cas, pour envoyer ces donn√©es, il faut veiller √† respecter les chronogrammes √† la page 24 de la datasheet &lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4&gt;‚û§ Commandes 4 bits :&lt;span class="hx:absolute hx:-mt-20" id="-commandes-4-bits-"&gt;&lt;/span&gt;
&lt;a href="#-commandes-4-bits-" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Dans la datasheet du module LCD &lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt; on voit que pour la partie d&amp;rsquo;initialisation, il y a des commandes avec une donn√©es de 4 bits et 2 bits de contr√¥le.&lt;/p&gt;
&lt;p&gt;C&amp;rsquo;est le cas le plus simple : on √©crit 4 bits de donn√©es sur un bus de 4 bits.&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;lcd_write_instr_4bits&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rs, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rw, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; data_4bits) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// on assigne les signaux de contr√¥le
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// on √©crit les 4 bits de la donn√©e
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Pour faire des temporisations on peut utiliser les macros dans la biblioth√®que &lt;code&gt;pic.h&lt;/code&gt; (d√©j√† import√©e par &lt;code&gt;xc.h&lt;/code&gt;) :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__delay_us(unsigned int t)&lt;/code&gt; : d√©lai en microsecondes&lt;/li&gt;
&lt;li&gt;&lt;code&gt;__delay_ms(unsigned int t)&lt;/code&gt; : d√©lai en millisecondes&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;__delay_us&lt;/code&gt; et &lt;code&gt;__delay_ms&lt;/code&gt; sont impl√©ment√©es sous forme de boucles qui utilisent le param√®tre &lt;code&gt;_XTAL_FREQ&lt;/code&gt; (fr√©quence de l&amp;rsquo;oscilateur du microcontr√¥leur) pour faire des d√©lais. Il faudra donc penser √† le d√©finir :&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#define _XTAL_FREQ XXXXXXX &lt;/span&gt;&lt;span style="color:#75715e"&gt;// remplacer XXXXXXX par la fr√©quence du microcontroleur
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"&gt;&lt;path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/&gt;&lt;/svg&gt;
&lt;span&gt;Note&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Il faudra aussi se poser la question de la pertinence des d√©lais les plus courts, au vu de la p√©riode l&amp;rsquo;horloge du microcontr√¥leur et sachant qu&amp;rsquo;une instruction assembleur s&amp;rsquo;ex√©cute en 4 cycles d&amp;rsquo;horloge&amp;hellip;
Combien de temps s&amp;rsquo;√©coule-t-il entre la fin de l&amp;rsquo;ex√©cution d&amp;rsquo;une instruction et la fin de l&amp;rsquo;ex√©cution de la suivante ?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4&gt;‚û§ Commandes 8 bits :&lt;span class="hx:absolute hx:-mt-20" id="-commandes-8-bits-"&gt;&lt;/span&gt;
&lt;a href="#-commandes-8-bits-" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Dans le tableau r√©capitulatif des commandes du module LCD dans la datasheet &lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt;, on voit que les autres commandes sont compos√©es d&amp;rsquo;une donn√©e sur 8 bits et, comme en mode 4 bits, 2 bits de contr√¥le.&lt;/p&gt;
&lt;p&gt;On repart donc sur la m√™me base qu&amp;rsquo;en mode 4 bits.
La diff√©rence est qu&amp;rsquo;il faut √™tre capable d&amp;rsquo;envoyer 8 bits de donn√©es sur un bus de 4 bits.&lt;/p&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Pour envoyer 8 bits de donn√©es sur un bus de 4 bits, pas le choix, il faut envoyer les donn√©es en 2 fois.
Il faut donc faire des &lt;a href="https://dept-info.labri.fr/ENSEIGNEMENT/programmation1/cours/CM_9___Manipulation_binaire.pdf" target="_blank" rel="noopener"&gt;op√©rations binaires&lt;/a&gt; afin de s√©parer les 4 bits de poids fort des 4 bits de poids faible.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition important"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"&gt;&lt;path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/&gt;&lt;/svg&gt;
&lt;span&gt;Important&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Le protocole exige d&amp;rsquo;envoyer les bits de poids fort en premier.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;lcd_write_instr_8bits&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rs, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; rw, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; data_8bits) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// on assigne les signaux de contr√¥le
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// on √©crit les 4 bits de poids fort de la donn√©e
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// on √©crit les 4 bits de poids faible de la donn√©e
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4&gt;‚û§ lcd_busy :&lt;span class="hx:absolute hx:-mt-20" id="-lcd_busy-"&gt;&lt;/span&gt;
&lt;a href="#-lcd_busy-" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Avant d&amp;rsquo;envoyer une commande il faut s&amp;rsquo;assurer que le module n&amp;rsquo;est pas occup√© √† ex√©cuter la commande pr√©c√©dente. Sinon la commande envoy√©e ne sera pas ex√©cut√©e.&lt;/p&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Pour savoir si la pr√©c√©dente commande a fini d&amp;rsquo;√™tre ex√©cut√©e, il est possible de lire le bit &amp;lsquo;busy&amp;rsquo;, avec la commande correspondante.
Cependant, dans un premier temps, par souci de simplicit√©, on peut se contenter d&amp;rsquo;une temporisation. Sa dur√©e doit √† √™tre sup√©rieure au temps d&amp;rsquo;ex√©cution de la commande la plus longue (cf. &lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt;).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>08. LCD Etape #3</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/8_lcd_3/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/8_lcd_3/</guid><description>
&lt;h3&gt;&lt;ins&gt;√âtape 3&lt;/ins&gt; : D√©veloppement des fonctions correspondant aux diff√©rentes commandes&lt;span class="hx:absolute hx:-mt-20" id="√©tape-3--d√©veloppement-des-fonctions-correspondant-aux-diff√©rentes-commandes"&gt;&lt;/span&gt;
&lt;a href="#%c3%a9tape-3--d%c3%a9veloppement-des-fonctions-correspondant-aux-diff%c3%a9rentes-commandes" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;La page 7 de la datasheet du module LCD &lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt; liste toutes les commandes propos√©es par le module. Avant de chercher √† d√©velopper la fonction d&amp;rsquo;initialisation, il est pr√©f√©rable de d√©velopper des fonctions correspondant √† ces commandes.&lt;/p&gt;
&lt;p&gt;Notamment les suivantes :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Clear Display &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Return Home &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Entry Mode Set &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Display ON/OFF Control &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Function Set &lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Ces commandes sont caract√©ris√©es par 3 valeurs : &lt;code&gt;rs&lt;/code&gt;, &lt;code&gt;rw&lt;/code&gt; et une donn√©e de 8 bits.
Ce sont justement les param√®tres de la foncton &lt;code&gt;lcd_write_instr_8bits&lt;/code&gt; d√©crite plus t√¥t.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Pour g√©n√©rer la donn√©e de la commande avec les bons arguments, il sera n√©cessaire pour certaines fonctions d&amp;rsquo;effectuer des &lt;a href="https://dept-info.labri.fr/ENSEIGNEMENT/programmation1/cours/CM_9___Manipulation_binaire.pdf" target="_blank" rel="noopener"&gt;op√©rations binaires&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>09. LCD Etape #4</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/9_lcd_4/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/9_lcd_4/</guid><description>
&lt;h3&gt;&lt;ins&gt;√âtape 4&lt;/ins&gt; : D√©veloppement de la fonction d&amp;rsquo;initialisation&lt;span class="hx:absolute hx:-mt-20" id="√©tape-4--d√©veloppement-de-la-fonction-dinitialisation"&gt;&lt;/span&gt;
&lt;a href="#%c3%a9tape-4--d%c3%a9veloppement-de-la-fonction-dinitialisation" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;La page 11 de la datasheet du module LCD &lt;em&gt;DS_Afficheurs_Sunplus&lt;/em&gt; d√©taille la proc√©dure d&amp;rsquo;initialisation du module.&lt;/p&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Plut√¥t que d&amp;rsquo;envoyer les commandes avec les donn√©es brutes dans cette proc√©dure, il est pr√©f√©rable de comprendre ce que fait chacune d&amp;rsquo;entre elles.
Ainsi, on remarque qu&amp;rsquo;une grande partie de la proc√©dure d&amp;rsquo;initialisation peut √™tre r√©alis√©e en effectuant des appels aux fonctions d√©finies plus haut.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition important"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"&gt;&lt;path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/&gt;&lt;/svg&gt;
&lt;span&gt;Important&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;ul&gt;
&lt;li&gt;Penser √† l&amp;rsquo;alimentation du module (&lt;em&gt;cf.&lt;/em&gt; datasheet de la carte PICDEM2+).&lt;/li&gt;
&lt;li&gt;Penser aux ports du microcontr√¥leur qui ont √©t√© utilis√©s&amp;hellip; Ont-ils bien √©t√© d√©finis comme entr√©e/sortie ?&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"&gt;&lt;path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/&gt;&lt;/svg&gt;
&lt;span&gt;Note&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;√Ä ce stade on peut tester si tout fonctionne. Pour cela, on peut ajouter un appel √† &lt;code&gt;lcd_display_control&lt;/code&gt; avec les bons param√®tres pour allumer l&amp;rsquo;√©cran et faire clignoter le curseur.
Ainsi, si apr√®s avoir t√©l√©vers√© le programme sur la carte, le curseur clignote sur l&amp;rsquo;√©cran, les √©tapes pr√©c√©dentes sont valid√©es !&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>10. LCD Etape #5</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/10_lcd_5/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/10_lcd_5/</guid><description>
&lt;h3&gt;&lt;ins&gt;√âtape 5&lt;/ins&gt; : D√©veloppement des fonctions utilisateur restantes&lt;span class="hx:absolute hx:-mt-20" id="√©tape-5--d√©veloppement-des-fonctions-utilisateur-restantes"&gt;&lt;/span&gt;
&lt;a href="#%c3%a9tape-5--d%c3%a9veloppement-des-fonctions-utilisateur-restantes" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Il ne manque alors plus qu&amp;rsquo;√† r√©aliser les fonctions :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lcd_putch&lt;/code&gt; pour √©crire un caract√®re&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_puts&lt;/code&gt; pour √©crire une cha√Æne de caract√®res&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lcd_pos&lt;/code&gt; pour le positionnement du curseur en un point de l&amp;rsquo;√©cran&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>11. Affichage de l'horloge</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/11_horloge/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/11_horloge/</guid><description>
&lt;!-- &lt;h2 id="aide_horloge"&gt; 4. Affichage de l'horloge sur l'√©cran LCD &lt;/h2&gt; --&gt;
&lt;p&gt;Maintenant que l&amp;rsquo;on peut afficher ce que l&amp;rsquo;on veut sur √©cran, l&amp;rsquo;objectif est d&amp;rsquo;y afficher l&amp;rsquo;horloge.&lt;/p&gt;
&lt;h2&gt;G√©n√©ration des heures, minutes et secondes&lt;span class="hx:absolute hx:-mt-20" id="g√©n√©ration-des-heures-minutes-et-secondes"&gt;&lt;/span&gt;
&lt;a href="#g%c3%a9n%c3%a9ration-des-heures-minutes-et-secondes" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Dans les parties pr√©c√©dentes, nous avons configur√© un timer d√©clenche une fonction d&amp;rsquo;interruption toutes les secondes, pr√©cis√©ment. Il s&amp;rsquo;agit donc d&amp;rsquo;une bonne base pour g√©n√©rer les heures, minutes et secondes qui seront affich√©s sur l&amp;rsquo;√©cran.&lt;/p&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Comme toujours en programmation microcontr√¥leur, bien r√©fl√©chir √† ce qui doit √™tre fait dans la fonction d&amp;rsquo;interruption et ce qui doit √™tre fait ailleurs&amp;hellip;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2&gt;Mise en forme&lt;span class="hx:absolute hx:-mt-20" id="mise-en-forme"&gt;&lt;/span&gt;
&lt;a href="#mise-en-forme" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Pour formatter l&amp;rsquo;horloge dans une cha√Æne de caract√®re, le plus simple est certainement d&amp;rsquo;utiliser la fonction &lt;code&gt;sprintf&lt;/code&gt; de la biblioth√®que &lt;code&gt;stdio&lt;/code&gt;.
Pour obtenir la documentation de &lt;code&gt;sprintf&lt;/code&gt;, il suffit de taper dans un terminal :&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;man sprintf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;On voit qu&amp;rsquo;elle fonctionne comme &lt;code&gt;printf&lt;/code&gt; mais avec un argument en plus : une cha√Æne de charact√®re de destination.&lt;/p&gt;
&lt;p&gt;Exemple :&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;char&lt;/span&gt; formatted_time[STRING_LENGTH]; &lt;span style="color:#75715e"&gt;// STRING_LENGTH: nombre de caract√®res apr√®s formatage + 1 (pour le &amp;#39;\0&amp;#39; de fin de cha√Æne)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;sprintf&lt;/span&gt;(formatted_time, &lt;span style="color:#e6db74"&gt;&amp;#34;%d:%d:%d&amp;#34;&lt;/span&gt;, t.hours, t.minutes, t.seconds);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;R√©sultat : &lt;code&gt;12:1:8&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Comme &lt;code&gt;printf&lt;/code&gt;, on peut forcer une mise en forme sur un nombre pr√©cis de caract√®res :&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;sprintf&lt;/span&gt;(formatted_time, &lt;span style="color:#e6db74"&gt;&amp;#34;%2d:%2d:%2d&amp;#34;&lt;/span&gt;, t.hours, t.minutes, t.seconds);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;R√©sultat : &lt;code&gt;12: 1: 8&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;De m√™me, on peut forcer l&amp;rsquo;affichage des 0 :&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;sprintf&lt;/span&gt;(formatted_time, &lt;span style="color:#e6db74"&gt;&amp;#34;%02d:%02d:%02d&amp;#34;&lt;/span&gt;, t.hours, t.minutes, t.seconds);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;R√©sultat : &lt;code&gt;12:01:08&lt;/code&gt;&lt;/p&gt;</description></item><item><title>12. Configuration de l'horloge</title><link>https://jsaussereau.github.io/fr/posts/eel6-numu2/12_configuration/</link><pubDate>Wed, 11 Feb 2026 00:00:00 +0200</pubDate><guid>https://jsaussereau.github.io/fr/posts/eel6-numu2/12_configuration/</guid><description>
&lt;!-- &lt;h2 id="aide_conf_horloge"&gt; 5. D√©veloppement de la fonctionnalit√© de configuration de l'horloge &lt;/h2&gt; --&gt;
&lt;!-- ### Rappel du cahier des charges --&gt;
&lt;p&gt;L&amp;rsquo;objectif de cette partie est de pouvoir configurer l&amp;rsquo;horloge √† l&amp;rsquo;aide des boutons poussoir S2 et S3 :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un appui prolong√© d&amp;rsquo;au moins 2 s sur S2 fera clignoter les heures, celles-ci s&amp;rsquo;incr√©menteront √† chaque appui sur S3, et automatiquement (f ‚âà 5 Hz) en cas d&amp;rsquo;appui maintenu au-del√† de 2 s.&lt;/li&gt;
&lt;li&gt;Un nouvel appui sur S2 permettra un r√©glage des minutes selon la m√™me proc√©dure.&lt;/li&gt;
&lt;li&gt;√âventuellement, un nouvel appui sur S2 permettra un r√©glage des secondes selon la m√™me proc√©dure.&lt;/li&gt;
&lt;li&gt;Un dernier appui sur S2 fera quitter le mode &amp;ldquo;r√©glage&amp;rdquo;.&lt;/li&gt;
&lt;/ul&gt;
&lt;link rel="stylesheet" href="https://jsaussereau.github.io/css/vendors/admonitions.53cd9f8afa9d9a8ac09093f668df057bc6d0f4bbd0886f39991a7b99934a7432.css" integrity="sha256-U82fivqdmorAkJP2aN8Fe8bQ9LvQiG85mRp7mZNKdDI=" crossorigin="anonymous"&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Un bonne approche pour impl√©menter cette fonctionnalit√© est de d√©velopper une machine d&amp;rsquo;√©tat.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="admonition tip"&gt;
&lt;div class="admonition-header"&gt;&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/&gt;&lt;/svg&gt;
&lt;span&gt;Conseil&lt;/span&gt;
&lt;/div&gt;
&lt;div class="admonition-content"&gt;
&lt;p&gt;Les interrupteurs physiques ont une p√©riode de rebonds qui peut provoquer des faux d√©clenchements. Pour √©viter des changements d&amp;rsquo;√©tats non d√©sir√©s, un filtre anti-rebonds peut √™tre impl√©ment√© √† l&amp;rsquo;aide de d√©lais de temporisation.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3&gt;Exemple d&amp;rsquo;impl√©mentation de machine d&amp;rsquo;√©tat en C&lt;span class="hx:absolute hx:-mt-20" id="exemple-dimpl√©mentation-de-machine-d√©tat-en-c"&gt;&lt;/span&gt;
&lt;a href="#exemple-dimpl%c3%a9mentation-de-machine-d%c3%a9tat-en-c" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Le principe est le m√™me que dans un langage de description mat√©rielle comme le VHDL : repr√©senter le comportement d&amp;rsquo;un syst√®me en r√©ponse √† des √©v√©nements.&lt;/p&gt;
&lt;p&gt;Voici un exemple de machine d&amp;rsquo;√©tat impl√©mentant le syst√®me de contr√¥le d&amp;rsquo;une porte automatique.&lt;/p&gt;
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// D√©claration de l&amp;#39;enum√©ration repr√©sentant les √©tats
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;enum&lt;/span&gt; state_e {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ST_CLOSED,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ST_OPENED,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ST_CLOSING,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ST_OPENING
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;enum&lt;/span&gt; state_e state &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ST_CLOSED; &lt;span style="color:#75715e"&gt;// D√©claration et initialisation de la variable contenant l&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; (&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;switch&lt;/span&gt;(state) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;case&lt;/span&gt; ST_CLOSED:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Condition de changement d&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (BTN_OPEN &lt;span style="color:#f92672"&gt;==&lt;/span&gt; BTN_ON) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; state &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ST_OPENING;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;case&lt;/span&gt; ST_OPENED:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Comportement si le syst√®me est dans cet √©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (BTN_OPEN &lt;span style="color:#f92672"&gt;==&lt;/span&gt; BTN_ON) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;reset_timer_opened&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Condition de changement d&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (timer_opened &lt;span style="color:#f92672"&gt;&amp;gt;=&lt;/span&gt; OPENED_DURATION) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; state &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ST_CLOSING;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;case&lt;/span&gt; ST_CLOSING:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Comportement si le syst√®me est dans cet √©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;move_door&lt;/span&gt;(DIRECTION_CLOSE);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Condition de changement d&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (SENSOR_SECURITY &lt;span style="color:#f92672"&gt;==&lt;/span&gt; PERSON_DETECTED &lt;span style="color:#f92672"&gt;||&lt;/span&gt; BTN_OPEN &lt;span style="color:#f92672"&gt;==&lt;/span&gt; BTN_ON) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; state &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ST_OPENING;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (SENSOR_CLOSED &lt;span style="color:#f92672"&gt;==&lt;/span&gt; SENSOR_ON) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; state &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ST_CLOSED;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;case&lt;/span&gt; ST_OPENING:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Comportement si le syst√®me est dans cet √©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;move_door&lt;/span&gt;(DIRECTION_OPEN);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Condition de changement d&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (SENSOR_OPENED &lt;span style="color:#f92672"&gt;==&lt;/span&gt; SENSOR_ON) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;reset_timer_opened&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; state &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ST_OPENED;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copier le code"
&gt;
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item></channel></rss>